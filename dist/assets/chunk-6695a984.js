import{b as s}from"./chunk-650cc613.js";const o=e=>{s.storage.local.get(["activeTabs","readyTabs"]).then(t=>{const{activeTabs:i={},readyTabs:a={}}=t;e.id!==void 0&&(i[e.id]?(i[e.id]=!1,s.storage.local.set({activeTabs:i}),s.action.setIcon({path:{16:"images/extension_16-inactive.png",32:"images/extension_32-inactive.png",48:"images/extension_48-inactive.png",128:"images/extension_128-inactive.png"}}),s.tabs.sendMessage(e.id,{type:"stop"})):(a[e.id]||(a[e.id]=!0),i[e.id]=!0,s.storage.local.set({readyTabs:a,activeTabs:i}),s.action.setIcon({path:{16:"images/extension_16.png",32:"images/extension_32.png",48:"images/extension_48.png",128:"images/extension_128.png"}}),s.tabs.sendMessage(e.id,{type:"start"})))})},g=e=>{s.storage.local.get(["activeTabs"]).then(t=>{const{activeTabs:i={}}=t;e.id!==void 0&&(i[e.id]?s.tabs.sendMessage(e.id,{type:"start"}):s.action.setIcon({path:{16:"images/extension_16-inactive.png",32:"images/extension_32-inactive.png",48:"images/extension_48-inactive.png",128:"images/extension_128-inactive.png"}}))})};s.action.onClicked.addListener(e=>{s.storage.local.get(["readyTabs"]).then(t=>{const{readyTabs:i={}}=t;e.id!==void 0&&(i[e.id]||(i[e.id]=!0,s.storage.local.set({readyTabs:i})),o(e))})});s.tabs.onRemoved.addListener(e=>{s.storage.local.get(["activeTabs","readyTabs"]).then(t=>{const{activeTabs:i={},readyTabs:a={}}=t;delete i[e],delete a[e],s.storage.local.set({readyTabs:a,activeTabs:i})})});s.tabs.onActivated.addListener(e=>{g({id:e.tabId})});s.tabs.onUpdated.addListener((e,t)=>{s.storage.local.get(["activeTabs","readyTabs"]).then(i=>{const{activeTabs:a={},readyTabs:n={}}=i;t.status==="complete"&&(n[e]=!1,a[e]=!1,s.storage.local.set({readyTabs:n,activeTabs:a}),s.action.setIcon({path:{16:"images/extension_16-inactive.png",32:"images/extension_32-inactive.png",48:"images/extension_48-inactive.png",128:"images/extension_128-inactive.png"}}))})});
